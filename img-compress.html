<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nazart Ulia - Budget Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        .header {
            background: linear-gradient(135deg, #1a3a8f, #2c5aa0);
            color: white;
            padding: 20px 0;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .budget-card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        .budget-card:hover {
            transform: translateY(-5px);
        }
        .budget-total {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .table-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .print-title {
            display: none;
        }
        @media print {
            .no-print {
                display: none !important;
            }
            .print-title {
                display: block;
                text-align: center;
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 20px;
            }
            body {
                background-color: white;
                font-size: 12px;
            }
            .table-container {
                box-shadow: none;
                padding: 0;
            }
            .budget-card {
                box-shadow: none;
                margin-bottom: 10px;
            }
        }
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .btn-language {
            background-color: #1a3a8f;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector no-print">
        <button class="btn btn-language" id="languageToggle">EN</button>
    </div>

    <!-- Header Section -->
    <div class="header text-center">
        <h1>Nazart Ulia Budget Management System</h1>
        <p class="lead">Budget Planning and Tracking for Fiscal Year 2024-25</p>
    </div>

    <div class="container">
        <!-- Editable Title -->
        <div class="row mb-4 no-print">
            <div class="col-12">
                <div class="form-group">
                    <label for="pageTitle">Page Title:</label>
                    <input type="text" class="form-control" id="pageTitle" 
                           value="Detail of Budget Amad and Expenditure Sayer Year 2024-25 and Approved Budget for Year 2025-26">
                </div>
            </div>
        </div>

        <!-- Budget Summary Cards -->
        <div class="row">
            <div class="col-md-4">
                <div class="card budget-card text-white bg-primary">
                    <div class="card-body">
                        <h5 class="card-title">Total Budget</h5>
                        <p class="budget-total" id="totalBudget">5,912,774</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card budget-card text-white bg-success">
                    <div class="card-body">
                        <h5 class="card-title">Total Expenditure</h5>
                        <p class="budget-total" id="totalExpenditure">4,894,474</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card budget-card text-white bg-info">
                    <div class="card-body">
                        <h5 class="card-title">Budget Remaining</h5>
                        <p class="budget-total" id="budgetRemaining">1,018,300</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Budget Breakdown -->
        <div class="table-container">
            <h3 class="mb-4">Budget Breakdown</h3>
            <div class="table-responsive">
                <table class="table table-striped table-hover" id="budgetTable">
                    <thead class="table-dark">
                        <tr>
                            <th>Serial No.</th>
                            <th>Head Name</th>
                            <th>Budget Amount</th>
                            <th>Expenditure Amount</th>
                            <th class="no-print">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="budgetTableBody">
                        <!-- Budget items will be populated here -->
                    </tbody>
                </table>
            </div>
            <div class="text-end no-print">
                <button class="btn btn-success mt-3" id="addHeadBtn">Add New Head</button>
            </div>
        </div>

        <!-- Detailed Budget Table -->
        <div class="table-container">
            <div class="print-title" id="printTitle"></div>
            <h3 class="mb-4">Detailed Budget Analysis</h3>
            <div class="table-responsive">
                <table class="table table-bordered" id="detailedBudgetTable">
                    <thead>
                        <tr>
                            <th colspan="6" class="text-center table-primary">Budget Income and Expenditure Details for the Year 2024-25 (Total Periods A to Z)</th>
                            <th colspan="6" class="text-center table-info">Details of Approved Budget Income and Expenditure for the Year 2025-26 (Total Periods A to Z)</th>
                        </tr>
                        <tr>
                            <!-- 2024-25 Columns -->
                            <th>Serial No.</th>
                            <th>Name of Head</th>
                            <th>Total Approved Budget Amad</th>
                            <th>Name of Head</th>
                            <th>Total Approved Budget Expenditure</th>
                            <th>Total Expenses 12 Months (April 2024 to March 2025)</th>
                            
                            <!-- 2025-26 Columns -->
                            <th>Serial No.</th>
                            <th>Name of Head</th>
                            <th>Approved Budget Income</th>
                            <th>Name of Head</th>
                            <th>Approved Budget Expenditure</th>
                            <th>Analysis Budget</th>
                        </tr>
                    </thead>
                    <tbody id="detailedBudgetTableBody">
                        <!-- Detailed budget items will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="row mb-5 no-print">
            <div class="col-12 text-center">
                <button class="btn btn-primary me-2" id="updateBudgetBtn">Update Budget</button>
                <button class="btn btn-warning me-2" id="printBtn">Print Report</button>
                <button class="btn btn-info" id="exportPdfBtn">Export as PDF</button>
            </div>
        </div>
    </div>

    <!-- Add Head Modal -->
    <div class="modal fade" id="addHeadModal" tabindex="-1" aria-labelledby="addHeadModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addHeadModalLabel">Add New Budget Head</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addHeadForm">
                        <div class="mb-3">
                            <label for="headName" class="form-label">Head Name</label>
                            <input type="text" class="form-control" id="headName" required>
                        </div>
                        <div class="mb-3">
                            <label for="headBudget" class="form-label">Budget Amount</label>
                            <input type="number" class="form-control" id="headBudget" required>
                        </div>
                        <div class="mb-3">
                            <label for="headExpenditure" class="form-label">Expenditure Amount</label>
                            <input type="number" class="form-control" id="headExpenditure" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveHeadBtn">Save Head</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Initialize budget data
        let budgetData = [
            { id: 1, name: "Budget Sayer Androon", budget: 1391000, expenditure: 1010075 },
            { id: 2, name: "Budget Sayer Baroon", budget: 115000, expenditure: 186065 },
            { id: 3, name: "Budget Amla Androon", budget: 4406774, expenditure: 3698334 }
        ];

        // Initialize language (English by default)
        let currentLanguage = 'en';
        const languageTexts = {
            en: {
                pageTitle: "Detail of Budget Amad and Expenditure Sayer Year 2024-25 and Approved Budget for Year 2025-26",
                totalBudget: "Total Budget",
                totalExpenditure: "Total Expenditure",
                budgetRemaining: "Budget Remaining",
                budgetBreakdown: "Budget Breakdown",
                serialNo: "Serial No.",
                headName: "Head Name",
                budgetAmount: "Budget Amount",
                expenditureAmount: "Expenditure Amount",
                actions: "Actions",
                addNewHead: "Add New Head",
                detailedBudgetAnalysis: "Detailed Budget Analysis",
                budget2024: "Budget Income and Expenditure Details for the Year 2024-25 (Total Periods A to Z)",
                budget2025: "Details of Approved Budget Income and Expenditure for the Year 2025-26 (Total Periods A to Z)",
                totalApprovedBudgetAmad: "Total Approved Budget Amad",
                totalApprovedBudgetExpenditure: "Total Approved Budget Expenditure",
                totalExpenses12Months: "Total Expenses 12 Months (April 2024 to March 2025)",
                approvedBudgetIncome: "Approved Budget Income",
                approvedBudgetExpenditure: "Approved Budget Expenditure",
                analysisBudget: "Analysis Budget",
                updateBudget: "Update Budget",
                printReport: "Print Report",
                exportPdf: "Export as PDF",
                addHeadModalTitle: "Add New Budget Head",
                headNameLabel: "Head Name",
                budgetAmountLabel: "Budget Amount",
                expenditureAmountLabel: "Expenditure Amount",
                cancel: "Cancel",
                saveHead: "Save Head",
                edit: "Edit",
                delete: "Delete"
            },
            ur: {
                pageTitle: "بجٹ آمد اور اخراجات سائر سال 2024-25 کی تفصیل اور سال 2025-26 کے لیے منظور شدہ بجٹ",
                totalBudget: "کل بجٹ",
                totalExpenditure: "کل اخراجات",
                budgetRemaining: "باقی بجٹ",
                budgetBreakdown: "بجٹ کی تفصیل",
                serialNo: "سیریل نمبر",
                headName: "ہیڈ کا نام",
                budgetAmount: "بجٹ کی رقم",
                expenditureAmount: "اخراجات کی رقم",
                actions: "اعمال",
                addNewHead: "نیا ہیڈ شامل کریں",
                detailedBudgetAnalysis: "تفصیلی بجٹ کا تجزیہ",
                budget2024: "سال 2024-25 کے لیے بجٹ آمدنی اور اخراجات کی تفصیل (کل ادوار A سے Z)",
                budget2025: "سال 2025-26 کے لیے منظور شدہ بجٹ آمدنی اور اخراجات کی تفصیل (کل ادوار A سے Z)",
                totalApprovedBudgetAmad: "کل منظور شدہ بجٹ آمد",
                totalApprovedBudgetExpenditure: "کل منظور شدہ بجٹ اخراجات",
                totalExpenses12Months: "کل اخراجات 12 ماہ (اپریل 2024 سے مارچ 2025)",
                approvedBudgetIncome: "منظور شدہ بجٹ آمدنی",
                approvedBudgetExpenditure: "منظور شدہ بجٹ اخراجات",
                analysisBudget: "بجٹ کا تجزیہ",
                updateBudget: "بجٹ اپ ڈیٹ کریں",
                printReport: "رپورٹ پرنٹ کریں",
                exportPdf: "پی ڈی ایف کے طور پر برآمد کریں",
                addHeadModalTitle: "نیا بجٹ ہیڈ شامل کریں",
                headNameLabel: "ہیڈ کا نام",
                budgetAmountLabel: "بجٹ کی رقم",
                expenditureAmountLabel: "اخراجات کی رقم",
                cancel: "منسوخ کریں",
                saveHead: "ہیڈ محفوظ کریں",
                edit: "ترمیم",
                delete: "حذف کریں"
            },
            hi: {
                pageTitle: "बजट आमद और व्यय सेयर वर्ष 2024-25 का विवरण और वर्ष 2025-26 के लिए अनुमोदित बजट",
                totalBudget: "कुल बजट",
                totalExpenditure: "कुल व्यय",
                budgetRemaining: "शेष बजट",
                budgetBreakdown: "बजट विवरण",
                serialNo: "क्रम संख्या",
                headName: "हेड का नाम",
                budgetAmount: "बजट राशि",
                expenditureAmount: "व्यय राशि",
                actions: "कार्य",
                addNewHead: "नया हेड जोड़ें",
                detailedBudgetAnalysis: "विस्तृत बजट विश्लेषण",
                budget2024: "वर्ष 2024-25 के लिए बजट आय और व्यय विवरण (कुल अवधि A से Z)",
                budget2025: "वर्ष 2025-26 के लिए अनुमोदित बजट आय और व्यय का विवरण (कुल अवधि A से Z)",
                totalApprovedBudgetAmad: "कुल अनुमोदित बजट आमद",
                totalApprovedBudgetExpenditure: "कुल अनुमोदित बजट व्यय",
                totalExpenses12Months: "कुल व्यय 12 महीने (अप्रैल 2024 से मार्च 2025)",
                approvedBudgetIncome: "अनुमोदित बजट आय",
                approvedBudgetExpenditure: "अनुमोदित बजट व्यय",
                analysisBudget: "बजट विश्लेषण",
                updateBudget: "बजट अपडेट करें",
                printReport: "रिपोर्ट प्रिंट करें",
                exportPdf: "PDF के रूप में निर्यात करें",
                addHeadModalTitle: "नया बजट हेड जोड़ें",
                headNameLabel: "हेड का नाम",
                budgetAmountLabel: "बजट राशि",
                expenditureAmountLabel: "व्यय राशि",
                cancel: "रद्द करें",
                saveHead: "हेड सहेजें",
                edit: "संपादित करें",
                delete: "हटाएं"
            }
        };

        // DOM elements
        const pageTitleInput = document.getElementById('pageTitle');
        const totalBudgetElement = document.getElementById('totalBudget');
        const totalExpenditureElement = document.getElementById('totalExpenditure');
        const budgetRemainingElement = document.getElementById('budgetRemaining');
        const budgetTableBody = document.getElementById('budgetTableBody');
        const detailedBudgetTableBody = document.getElementById('detailedBudgetTableBody');
        const addHeadBtn = document.getElementById('addHeadBtn');
        const addHeadModal = new bootstrap.Modal(document.getElementById('addHeadModal'));
        const saveHeadBtn = document.getElementById('saveHeadBtn');
        const updateBudgetBtn = document.getElementById('updateBudgetBtn');
        const printBtn = document.getElementById('printBtn');
        const exportPdfBtn = document.getElementById('exportPdfBtn');
        const languageToggle = document.getElementById('languageToggle');
        const printTitle = document.getElementById('printTitle');

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateBudgetSummary();
            renderBudgetTable();
            renderDetailedBudgetTable();
            setupEventListeners();
        });

        // Set up event listeners
        function setupEventListeners() {
            pageTitleInput.addEventListener('change', updatePrintTitle);
            addHeadBtn.addEventListener('click', () => addHeadModal.show());
            saveHeadBtn.addEventListener('click', saveNewHead);
            updateBudgetBtn.addEventListener('click', updateBudgetSummary);
            printBtn.addEventListener('click', printReport);
            exportPdfBtn.addEventListener('click', exportToPdf);
            languageToggle.addEventListener('click', toggleLanguage);
        }

        // Update budget summary
        function updateBudgetSummary() {
            let totalBudget = 0;
            let totalExpenditure = 0;

            budgetData.forEach(item => {
                totalBudget += item.budget;
                totalExpenditure += item.expenditure;
            });

            totalBudgetElement.textContent = formatNumber(totalBudget);
            totalExpenditureElement.textContent = formatNumber(totalExpenditure);
            budgetRemainingElement.textContent = formatNumber(totalBudget - totalExpenditure);
        }

        // Render budget table
        function renderBudgetTable() {
            budgetTableBody.innerHTML = '';
            
            budgetData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.name}</td>
                    <td>${formatNumber(item.budget)}</td>
                    <td>${formatNumber(item.expenditure)}</td>
                    <td class="no-print">
                        <button class="btn btn-sm btn-warning me-1 edit-btn" data-id="${item.id}">${getText('edit')}</button>
                        <button class="btn btn-sm btn-danger delete-btn" data-id="${item.id}">${getText('delete')}</button>
                    </td>
                `;
                budgetTableBody.appendChild(row);
            });

            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    editHead(id);
                });
            });

            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    deleteHead(id);
                });
            });
        }

        // Render detailed budget table
        function renderDetailedBudgetTable() {
            detailedBudgetTableBody.innerHTML = '';
            
            budgetData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <!-- 2024-25 Columns -->
                    <td>${index + 1}</td>
                    <td>${item.name}</td>
                    <td>${formatNumber(item.budget)}</td>
                    <td>${item.name}</td>
                    <td>${formatNumber(item.expenditure)}</td>
                    <td>${formatNumber(item.expenditure)}</td>
                    
                    <!-- 2025-26 Columns -->
                    <td>${index + 1}</td>
                    <td>${item.name}</td>
                    <td>${formatNumber(item.budget)}</td>
                    <td>${item.name}</td>
                    <td>${formatNumber(item.expenditure)}</td>
                    <td>${formatNumber(item.budget - item.expenditure)}</td>
                `;
                detailedBudgetTableBody.appendChild(row);
            });
        }

        // Save new head
        function saveNewHead() {
            const headName = document.getElementById('headName').value;
            const headBudget = parseInt(document.getElementById('headBudget').value);
            const headExpenditure = parseInt(document.getElementById('headExpenditure').value);

            if (headName && !isNaN(headBudget) && !isNaN(headExpenditure)) {
                const newId = budgetData.length > 0 ? Math.max(...budgetData.map(item => item.id)) + 1 : 1;
                budgetData.push({
                    id: newId,
                    name: headName,
                    budget: headBudget,
                    expenditure: headExpenditure
                });

                updateBudgetSummary();
                renderBudgetTable();
                renderDetailedBudgetTable();
                addHeadModal.hide();
                
                // Reset form
                document.getElementById('addHeadForm').reset();
            } else {
                alert('Please fill all fields with valid values');
            }
        }

        // Edit head
        function editHead(id) {
            const head = budgetData.find(item => item.id === id);
            if (head) {
                const newName = prompt('Enter new name for the head:', head.name);
                if (newName !== null) {
                    const newBudget = parseInt(prompt('Enter new budget amount:', head.budget));
                    if (!isNaN(newBudget)) {
                        const newExpenditure = parseInt(prompt('Enter new expenditure amount:', head.expenditure));
                        if (!isNaN(newExpenditure)) {
                            head.name = newName;
                            head.budget = newBudget;
                            head.expenditure = newExpenditure;
                            
                            updateBudgetSummary();
                            renderBudgetTable();
                            renderDetailedBudgetTable();
                        }
                    }
                }
            }
        }

        // Delete head
        function deleteHead(id) {
            if (confirm('Are you sure you want to delete this head?')) {
                budgetData = budgetData.filter(item => item.id !== id);
                updateBudgetSummary();
                renderBudgetTable();
                renderDetailedBudgetTable();
            }
        }

        // Print report
        function printReport() {
            updatePrintTitle();
            window.print();
        }

        // Export to PDF
        function exportToPdf() {
            alert('PDF export functionality would be implemented here with a library like jsPDF');
            // In a real implementation, you would use jsPDF to generate a PDF
        }

        // Toggle language
        function toggleLanguage() {
            if (currentLanguage === 'en') {
                currentLanguage = 'ur';
                languageToggle.textContent = 'UR';
            } else if (currentLanguage === 'ur') {
                currentLanguage = 'hi';
                languageToggle.textContent = 'HI';
            } else {
                currentLanguage = 'en';
                languageToggle.textContent = 'EN';
            }
            
            updateLanguage();
        }

        // Update language
        function updateLanguage() {
            const texts = languageTexts[currentLanguage];
            
            // Update page title
            pageTitleInput.value = texts.pageTitle;
            updatePrintTitle();
            
            // Update table headers and labels
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (texts[key]) {
                    element.textContent = texts[key];
                }
            });
            
            // Re-render tables with new language
            renderBudgetTable();
        }

        // Get text for current language
        function getText(key) {
            return languageTexts[currentLanguage][key] || key;
        }

        // Update print title
        function updatePrintTitle() {
            printTitle.textContent = pageTitleInput.value;
        }

        // Format number with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
    </script>
</body>
</html>
