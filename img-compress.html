<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nazart Ulia Budget Management</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            width: 95%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 0;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            background-color: var(--light-color);
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        .page-title input {
            width: 100%;
            padding: 10px;
            font-size: 18px;
            text-align: center;
            border: none;
            background: transparent;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .btn {
            padding: 10px 15px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
        }
        
        .btn:hover {
            background-color: #2980b9;
        }
        
        .btn-danger {
            background-color: var(--accent-color);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: #27ae60;
        }
        
        .btn-success:hover {
            background-color: #219653;
        }
        
        .font-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .font-controls select, .font-controls input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .budget-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .summary-card {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .summary-card h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
        }
        
        .budget-tables {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .budget-table {
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .table-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: center;
        }
        
        .table-header input {
            width: 100%;
            padding: 8px;
            font-size: 16px;
            text-align: center;
            border: none;
            background: transparent;
            color: white;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--light-color);
            font-weight: bold;
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .analysis {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .analysis h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .analysis-item {
            margin-bottom: 10px;
            padding: 10px;
            background-color: var(--light-color);
            border-radius: 4px;
        }
        
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .language-switcher select {
            padding: 8px 15px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background-color: white;
        }
        
        @media (max-width: 768px) {
            .budget-tables {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
        }
        
        @media print {
            .no-print {
                display: none;
            }
            
            body {
                background-color: white;
            }
            
            .container {
                width: 100%;
                padding: 0;
            }
            
            .budget-table {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
    <div class="language-switcher no-print">
        <select id="languageSelect">
            <option value="en">English</option>
            <option value="ur">Urdu</option>
        </select>
    </div>

    <div class="container">
        <header>
            <h1>Nazart Ulia Budget Management System</h1>
        </header>
        
        <div class="page-title">
            <input type="text" id="pageTitle" value="Detail of Budget Amad and Expenditure Sayer Year 2024-25 and Approved Budget for Year 2025-26">
        </div>
        
        <div class="controls no-print">
            <div class="font-controls">
                <select id="fontFamily">
                    <option value="Arial, sans-serif">Arial</option>
                    <option value="'Times New Roman', serif">Times New Roman</option>
                    <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
                </select>
                <input type="number" id="fontSize" min="10" max="24" value="14">
                <button class="btn" id="applyFont">Apply Font</button>
            </div>
            <div>
                <button class="btn btn-success" id="addHead">Add New Head</button>
                <button class="btn" id="printBtn">Print Report</button>
                <button class="btn" id="exportPdf">Export to PDF</button>
            </div>
        </div>
        
        <div class="budget-summary">
            <div class="summary-card">
                <h3>Budget Overview</h3>
                <div class="summary-item">
                    <span>Total Budget:</span>
                    <span id="totalBudget">5,912,774</span>
                </div>
                <div class="summary-item">
                    <span>Total Expenditure:</span>
                    <span id="totalExpenditure">4,894,474</span>
                </div>
                <div class="summary-item">
                    <span>Remaining Budget:</span>
                    <span id="remainingBudget">1,018,300</span>
                </div>
            </div>
            
            <div class="summary-card">
                <h3>Androon Budget Details</h3>
                <div class="summary-item">
                    <span>Budget Sayer Androon:</span>
                    <span id="budgetSayerAndroon">1,391,000</span>
                </div>
                <div class="summary-item">
                    <span>Budget Expenditure Androon:</span>
                    <span id="expenditureAndroon">1,010,075</span>
                </div>
                <div class="summary-item">
                    <span>Budget Amla Androon:</span>
                    <span id="budgetAmlaAndroon">4,406,774</span>
                </div>
                <div class="summary-item">
                    <span>Expenditure Androon:</span>
                    <span id="expenditureAmlaAndroon">3,698,334</span>
                </div>
            </div>
            
            <div class="summary-card">
                <h3>Baroon Budget Details</h3>
                <div class="summary-item">
                    <span>Budget Sayer Baroon:</span>
                    <span id="budgetSayerBaroon">115,000</span>
                </div>
                <div class="summary-item">
                    <span>Budget Expenditure Baroon:</span>
                    <span id="expenditureBaroon">186,065</span>
                </div>
            </div>
        </div>
        
        <div class="budget-tables">
            <div class="budget-table">
                <div class="table-header">
                    <input type="text" value="Budget Income and Expenditure Details for the Year 2024-25 (Total Periods A to Z)">
                </div>
                <div class="table-content">
                    <table id="table2024">
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Name of Head</th>
                                <th>Total Approved Budget Amad</th>
                                <th>Name of Head</th>
                                <th>Total Approved Budget Expenditure</th>
                                <th>Total Expenses 12 Months (April 2024 to March 2025)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td><input type="text" value="Budget Sayer Androon"></td>
                                <td><input type="number" value="1391000"></td>
                                <td><input type="text" value="Budget Expenditure Androon"></td>
                                <td><input type="number" value="1010075"></td>
                                <td><input type="number" value="1010075"></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><input type="text" value="Budget Sayer Baroon"></td>
                                <td><input type="number" value="115000"></td>
                                <td><input type="text" value="Budget Expenditure Baroon"></td>
                                <td><input type="number" value="186065"></td>
                                <td><input type="number" value="186065"></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><input type="text" value="Budget Amla Androon"></td>
                                <td><input type="number" value="4406774"></td>
                                <td><input type="text" value="Expenditure Androon"></td>
                                <td><input type="number" value="3698334"></td>
                                <td><input type="number" value="3698334"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="budget-table">
                <div class="table-header">
                    <input type="text" value="Details of Approved Budget Income and Expenditure for the Year 2025-26 (Total Periods A to Z)">
                </div>
                <div class="table-content">
                    <table id="table2025">
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Name of Head</th>
                                <th>Approved Budget Income</th>
                                <th>Name of Head</th>
                                <th>Approved Budget Expenditure</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td><input type="text" value="Budget Sayer Androon"></td>
                                <td><input type="number" value="1500000"></td>
                                <td><input type="text" value="Budget Expenditure Androon"></td>
                                <td><input type="number" value="1100000"></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td><input type="text" value="Budget Sayer Baroon"></td>
                                <td><input type="number" value="120000"></td>
                                <td><input type="text" value="Budget Expenditure Baroon"></td>
                                <td><input type="number" value="190000"></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td><input type="text" value="Budget Amla Androon"></td>
                                <td><input type="number" value="4500000"></td>
                                <td><input type="text" value="Expenditure Androon"></td>
                                <td><input type="number" value="3800000"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="analysis">
            <h2>Budget Analysis</h2>
            <div class="analysis-item">
                <strong>Total Budget Utilization:</strong> 82.78% (4,894,474 / 5,912,774)
            </div>
            <div class="analysis-item">
                <strong>Androon Budget Utilization:</strong> 85.39% (4,708,409 / 5,515,774)
            </div>
            <div class="analysis-item">
                <strong>Baroon Budget Utilization:</strong> 161.80% (186,065 / 115,000) - <span style="color: red;">Over Budget</span>
            </div>
            <div class="analysis-item">
                <strong>Remaining Budget:</strong> 1,018,300 (17.22% of Total Budget)
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Font controls
            const fontFamily = document.getElementById('fontFamily');
            const fontSize = document.getElementById('fontSize');
            const applyFont = document.getElementById('applyFont');
            
            applyFont.addEventListener('click', function() {
                document.body.style.fontFamily = fontFamily.value;
                document.body.style.fontSize = fontSize.value + 'px';
            });
            
            // Add new head functionality
            const addHeadBtn = document.getElementById('addHead');
            const table2024 = document.getElementById('table2024').getElementsByTagName('tbody')[0];
            const table2025 = document.getElementById('table2025').getElementsByTagName('tbody')[0];
            
            addHeadBtn.addEventListener('click', function() {
                const rowCount2024 = table2024.rows.length + 1;
                const rowCount2025 = table2025.rows.length + 1;
                
                // Add row to 2024 table
                const newRow2024 = table2024.insertRow();
                newRow2024.innerHTML = `
                    <td>${rowCount2024}</td>
                    <td><input type="text" placeholder="Enter head name"></td>
                    <td><input type="number" placeholder="0"></td>
                    <td><input type="text" placeholder="Enter head name"></td>
                    <td><input type="number" placeholder="0"></td>
                    <td><input type="number" placeholder="0"></td>
                `;
                
                // Add row to 2025 table
                const newRow2025 = table2025.insertRow();
                newRow2025.innerHTML = `
                    <td>${rowCount2025}</td>
                    <td><input type="text" placeholder="Enter head name"></td>
                    <td><input type="number" placeholder="0"></td>
                    <td><input type="text" placeholder="Enter head name"></td>
                    <td><input type="number" placeholder="0"></td>
                `;
                
                updateBudgetSummary();
            });
            
            // Print functionality
            const printBtn = document.getElementById('printBtn');
            printBtn.addEventListener('click', function() {
                window.print();
            });
            
            // PDF export functionality
            const exportPdf = document.getElementById('exportPdf');
            exportPdf.addEventListener('click', function() {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('l', 'mm', 'a4');
                
                // Add title
                doc.setFontSize(16);
                doc.text(document.getElementById('pageTitle').value, 20, 20);
                
                // Add budget summary
                doc.setFontSize(12);
                let yPosition = 40;
                
                doc.text('Budget Overview', 20, yPosition);
                yPosition += 10;
                doc.text(`Total Budget: ${document.getElementById('totalBudget').textContent}`, 20, yPosition);
                yPosition += 7;
                doc.text(`Total Expenditure: ${document.getElementById('totalExpenditure').textContent}`, 20, yPosition);
                yPosition += 7;
                doc.text(`Remaining Budget: ${document.getElementById('remainingBudget').textContent}`, 20, yPosition);
                
                yPosition += 15;
                
                // Add tables
                const table2024Element = document.getElementById('table2024');
                const table2025Element = document.getElementById('table2025');
                
                // Create table data for 2024
                let table2024Data = [];
                const headers2024 = [];
                for (let i = 0; i < table2024Element.rows[0].cells.length; i++) {
                    headers2024.push(table2024Element.rows[0].cells[i].textContent);
                }
                
                for (let i = 1; i < table2024Element.rows.length; i++) {
                    const row = table2024Element.rows[i];
                    const rowData = [];
                    for (let j = 0; j < row.cells.length; j++) {
                        const input = row.cells[j].querySelector('input');
                        rowData.push(input ? input.value : row.cells[j].textContent);
                    }
                    table2024Data.push(rowData);
                }
                
                // Create table data for 2025
                let table2025Data = [];
                const headers2025 = [];
                for (let i = 0; i < table2025Element.rows[0].cells.length; i++) {
                    headers2025.push(table2025Element.rows[0].cells[i].textContent);
                }
                
                for (let i = 1; i < table2025Element.rows.length; i++) {
                    const row = table2025Element.rows[i];
                    const rowData = [];
                    for (let j = 0; j < row.cells.length; j++) {
                        const input = row.cells[j].querySelector('input');
                        rowData.push(input ? input.value : row.cells[j].textContent);
                    }
                    table2025Data.push(rowData);
                }
                
                // Add 2024 table to PDF
                doc.text('Budget Income and Expenditure Details for the Year 2024-25', 20, yPosition);
                yPosition += 10;
                
                // Simple table implementation for demo
                // In a real application, you would use a more robust table generation method
                let startY = yPosition;
                table2024Data.forEach((row, index) => {
                    if (startY > 270) { // New page if needed
                        doc.addPage();
                        startY = 20;
                    }
                    
                    doc.text(`${row[0]}`, 20, startY);
                    doc.text(`${row[1]}`, 40, startY);
                    doc.text(`${row[2]}`, 100, startY);
                    doc.text(`${row[3]}`, 140, startY);
                    doc.text(`${row[4]}`, 200, startY);
                    doc.text(`${row[5]}`, 240, startY);
                    
                    startY += 7;
                });
                
                // Add 2025 table to PDF
                doc.addPage();
                doc.text('Details of Approved Budget Income and Expenditure for the Year 2025-26', 20, 20);
                startY = 30;
                
                table2025Data.forEach((row, index) => {
                    if (startY > 270) { // New page if needed
                        doc.addPage();
                        startY = 20;
                    }
                    
                    doc.text(`${row[0]}`, 20, startY);
                    doc.text(`${row[1]}`, 40, startY);
                    doc.text(`${row[2]}`, 100, startY);
                    doc.text(`${row[3]}`, 140, startY);
                    doc.text(`${row[4]}`, 200, startY);
                    
                    startY += 7;
                });
                
                // Save the PDF
                doc.save('nazart-ulia-budget-report.pdf');
            });
            
            // Update budget summary when values change
            function updateBudgetSummary() {
                // In a real application, you would calculate these values based on the table data
                // For this demo, we'll just update with the current values
                
                // Get values from inputs
                const budgetSayerAndroon = document.querySelector('#table2024 tbody tr:nth-child(1) td:nth-child(3) input').value;
                const expenditureAndroon = document.querySelector('#table2024 tbody tr:nth-child(1) td:nth-child(5) input').value;
                const budgetSayerBaroon = document.querySelector('#table2024 tbody tr:nth-child(2) td:nth-child(3) input').value;
                const expenditureBaroon = document.querySelector('#table2024 tbody tr:nth-child(2) td:nth-child(5) input').value;
                const budgetAmlaAndroon = document.querySelector('#table2024 tbody tr:nth-child(3) td:nth-child(3) input').value;
                const expenditureAmlaAndroon = document.querySelector('#table2024 tbody tr:nth-child(3) td:nth-child(5) input').value;
                
                // Calculate totals
                const totalBudget = parseInt(budgetSayerAndroon) + parseInt(budgetSayerBaroon) + parseInt(budgetAmlaAndroon);
                const totalExpenditure = parseInt(expenditureAndroon) + parseInt(expenditureBaroon) + parseInt(expenditureAmlaAndroon);
                const remainingBudget = totalBudget - totalExpenditure;
                
                // Update display
                document.getElementById('totalBudget').textContent = formatNumber(totalBudget);
                document.getElementById('totalExpenditure').textContent = formatNumber(totalExpenditure);
                document.getElementById('remainingBudget').textContent = formatNumber(remainingBudget);
                document.getElementById('budgetSayerAndroon').textContent = formatNumber(budgetSayerAndroon);
                document.getElementById('expenditureAndroon').textContent = formatNumber(expenditureAndroon);
                document.getElementById('budgetSayerBaroon').textContent = formatNumber(budgetSayerBaroon);
                document.getElementById('expenditureBaroon').textContent = formatNumber(expenditureBaroon);
                document.getElementById('budgetAmlaAndroon').textContent = formatNumber(budgetAmlaAndroon);
                document.getElementById('expenditureAmlaAndroon').textContent = formatNumber(expenditureAmlaAndroon);
                
                // Update analysis
                const utilizationRate = ((totalExpenditure / totalBudget) * 100).toFixed(2);
                const androonBudget = parseInt(budgetSayerAndroon) + parseInt(budgetAmlaAndroon);
                const androonExpenditure = parseInt(expenditureAndroon) + parseInt(expenditureAmlaAndroon);
                const androonUtilization = ((androonExpenditure / androonBudget) * 100).toFixed(2);
                const baroonUtilization = ((parseInt(expenditureBaroon) / parseInt(budgetSayerBaroon)) * 100).toFixed(2);
                
                document.querySelector('.analysis').innerHTML = `
                    <h2>Budget Analysis</h2>
                    <div class="analysis-item">
                        <strong>Total Budget Utilization:</strong> ${utilizationRate}% (${formatNumber(totalExpenditure)} / ${formatNumber(totalBudget)})
                    </div>
                    <div class="analysis-item">
                        <strong>Androon Budget Utilization:</strong> ${androonUtilization}% (${formatNumber(androonExpenditure)} / ${formatNumber(androonBudget)})
                    </div>
                    <div class="analysis-item">
                        <strong>Baroon Budget Utilization:</strong> ${baroonUtilization}% (${formatNumber(expenditureBaroon)} / ${formatNumber(budgetSayerBaroon)}) ${parseInt(expenditureBaroon) > parseInt(budgetSayerBaroon) ? '- <span style="color: red;">Over Budget</span>' : ''}
                    </div>
                    <div class="analysis-item">
                        <strong>Remaining Budget:</strong> ${formatNumber(remainingBudget)} (${(100 - parseFloat(utilizationRate)).toFixed(2)}% of Total Budget)
                    </div>
                `;
            }
            
            // Helper function to format numbers with commas
            function formatNumber(num) {
                return parseInt(num).toLocaleString('en-US');
            }
            
            // Add event listeners to all inputs to update summary when values change
            const allInputs = document.querySelectorAll('input[type="number"]');
            allInputs.forEach(input => {
                input.addEventListener('input', updateBudgetSummary);
            });
            
            // Language switcher
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.addEventListener('change', function() {
                if (this.value === 'ur') {
                    // In a real application, you would replace all text with Urdu translations
                    alert('Urdu language selected. In a full implementation, all text would be translated to Urdu.');
                }
            });
            
            // Initialize the budget summary
            updateBudgetSummary();
        });
    </script>
</body>
</html>
